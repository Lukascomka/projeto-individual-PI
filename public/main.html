<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="./CSS/main.css">
    <link rel="stylesheet" href="./assets/img/favicon.ico">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <title>Game History</title>
</head>

<body>

    <div class="container-main">

        <nav class="nav">
            <div class="conteudo-nav">

                <span id="nome">UsuÃ¡rio</span>

                <div onclick="homepage()" class="nav-selection"><img src="./assets/img/home (1) 1.png" alt="">Home Page
                </div>
                <div onclick="mensagem()" class="nav-selection"><img src="./assets/img/mensagens.png" alt="">Mensagem
                </div>
                <div onclick="quiz()" class="nav-selection"><img src="./assets/img/game-controller_17846449.png"
                        alt="">Quiz</div>
                <div onclick="jogosEmAlta()" class="nav-selection"><img src="./assets/img/dashboard (1) 1.png"
                        alt="">Jogos em alta
                </div>
                <div class="seta"><a href="./login.html"><img src="./assets/img/Frame 1.png" alt=""></a></div>
            </div>
        </nav>
        <div class="conteudo">
            <div class="mensagem-bem-vindo-principal"></div>
            <div class="posts">

                <div id="aposPost"></div>

            </div>
            <div class="class_mensagem"></div>
            <div class="class-quiz">
                <div class="conteudo_options_console"></div>


            </div>
            <div class="dash">
            </div>
        </div>
    </div>
    <div id="redesocial"></div>
    </div>

    </div>

    <footer class="footer">
        <div class="social-icons">
            <img class="social-icon" src=".//assets/img/twitch.png" />
            <img class="social-icon" src=".//assets/img/github.png" />
            <img class="social-icon" src=".//assets/img/discord.png" />
        </div>
        <div class="footer-logo">
            <img class="footer-icon" src=".//assets/img/logo.png" />
            <div class="footer-radio">Game-History</div>
        </div>
    </footer>

</body>

</html>

<script>


    let nome = "Jogador"; // Definindo um nome padrÃ£o

    const divs = document.getElementsByClassName('nav-selection');
    const imgNormal = [
        './assets/img/home (1) 1.png',
        './assets/img/mensagens.png',
        './assets/img/game-controller_17846449.png',
        './assets/img/dashboard (1) 1.png',
    ];

    const imgAtivas = [
        './assets/img/ativo-home-page.png',
        './assets/img/ativo-mensagem.png',
        './assets/img/ativo-game-controller.png',
        './assets/img/ativo-dashboard.png'
    ];

    for (let i = 0; i < divs.length; i++) {
        divs[i].addEventListener('click', function () {

            for (let o = 0; o < divs.length; o++) {
                divs[o].classList.remove('ativo');
                divs[o].querySelector('img').src = imgNormal[o];
            }

            divs[i].classList.add('ativo');
            divs[i].querySelector('img').src = imgAtivas[i];
        });
    }

    const class_mensagem = document.querySelector(".class_mensagem");
    const posts = document.querySelector(".posts");
    const msg_home = document.querySelector(".mensagem-bem-vindo-principal");
    const dash = document.querySelector(".dash");
    const div_escolha = document.querySelector(".conteudo_options_console");
    let quiZ = document.querySelector(".class-quiz")
    let cards = document.querySelector(".cards")

    // VariÃ¡veis do quiz - RESETADAS a cada novo quiz



    let porcentagemFinalDeAcertos = 0

    let pontuacaoFinal = 0;
    let quantidadeDeQuestoes = 10;
    let tentativaIncorreta = 0;
    let RespostaCorreta = 0;
    let RespostaErrada = 0;
    let respostaUsuario = [];
    let pontuacaoFial = 0;
    let posteusuario = [{
        post:
        {
            conteudo: [],
            dataPublicacao: [],
        }
    }];









    // function carregarGraficoDePizza() {


    //         fetch("main/grafico")
    //         .then( function (resposta) {
    //             console.log("Estou no then do grafico")
    //             if(resposta.ok){
    //                 console.log(resposta)
    //                 resposta.json().then(json => {
    //                     console.log(json)
    //                     console.log(JSON.stringify(json));


    //                 })
    //                     throw new Error(`HTTP error! status: ${resposta.status}`);
    //             }     
    //                 return resposta.json()

    //             }). then()

    // }









    window.onload = function () {
        // carregarGraficoDePizza()
        carregarFeedDePosts();

    }



    const respostaCerta = [
        {
            plataforma: 'playstation',
            respostas: [
                "Kratos",
                "Nathan Drake",
                "The last of Us",
                "Horizon Zero Dawn",
                "Detroit: Become Human",
                "Watch Dogs",
                "Red dead Redemption 2",
                "True Crime",
                "Need For speed Most Wanted",
                "Bully"
            ]
        },
        {
            plataforma: 'xbox',
            respostas: [
                "Master Chief",
                "Forza Horizon",
                "Hellblade: Senua's Sacrifice",
                "Gears of War",
                "Minecraft",
                "Conker's Bad Fur Day",
                "Kameo: Elements of Power",
                "Fable",
                "Quantum Break",
                "Cuphead"
            ]
        },
        {
            plataforma: 'fliperama',
            respostas: [
                "Ryu",
                "Mortal Kombat",
                "F-Zero",
                "Donkey Kong",
                "Final Fight",
                "Fatal Fury",
                "Super Hang-On",
                "Pac-Man",
                "Metal Slug",
                "Ghosts 'n Goblins"
            ]
        }
    ];

    function carregarFeedDePosts() {
        fetch("/main/feed")
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(posts => {
                const feedContainer = document.getElementById('feed-de-posts');

                if (feedContainer) {
                    feedContainer.innerHTML = '';
                    if (posts.length > 0) {
                        posts.forEach(post => {
                            const postContainer = document.createElement('div');
                            postContainer.id = 'cards_post';
                            const cardDiv = document.createElement('div');
                            cardDiv.classList.add('card');

                            cardDiv.innerHTML = `
                            ${post.nome_usuario ? `<strong>${post.nome_usuario}:</strong> ` : ''}${post.conteudo_publicacao}<br>
                            <small>${new Date(post.dataPublicacao).toLocaleDateString()} ${new Date(post.dataPublicacao).toLocaleTimeString()}</small>
                        `;

                            postContainer.appendChild(cardDiv);
                            feedContainer.appendChild(postContainer);
                        });
                    } else {
                        feedContainer.innerHTML = '<p>Ainda nÃ£o hÃ¡ posts no feed.</p>';
                    }
                } else {
                    console.error("Elemento 'feed-de-posts' nÃ£o encontrado no HTML.");
                }
            })
            .catch(error => {
                console.error('Erro ao carregar o feed de posts:', error);
                const feedContainer = document.getElementById('feed-de-posts');
                if (feedContainer) {
                    feedContainer.innerHTML = '<p>Erro ao carregar o feed.</p>';
                }
            });
    }

    const nomeUsuario = [];
    const QtdErros = []
    const QtdAcertos = []
    const tipodeQuiz = []
    const Fliperama = []
    const Xbox = []
    const Playstation = []
    function obterDadosParaQuiz() {


        fetch('/main/obterDados')
            .then(function (response) {
                return response.json();
            })
            .then(data => {
                nomeUsuario;
                QtdErros;
                QtdAcertos;
                tipodeQuiz;
                Fliperama;
                Xbox;
                Playstation
                for (i = 0; i < data.length; i++) {
                    if (data[i].total_acertos && data[i].total_erros && data[i].tipodeQuiz) {

                        QtdAcertos.push(data[i].total_acertos)
                        QtdErros.push(data[i].total_erros)
                        tipodeQuiz.push(data[i].tipodeQuiz)
                        if (tipodeQuiz[i] == 'fliperama') {
                            Fliperama.push(tipodeQuiz[i])

                        }
                        else if (tipodeQuiz[i] == 'playstation') {
                            Playstation.push(tipodeQuiz[i])
                        }
                        else if (tipodeQuiz[i] == 'xbox') {
                            Xbox.push(tipodeQuiz[i])
                        }

                        // console.log('aqui estÃ¡ o nome do usuario', nomeUsuario)

                    }
                }
                console.log('aquiestÃ¡ o total_de_acertos', QtdAcertos)
                console.log('aqui esta a quantidade de erros', QtdErros)
                console.log("Aqui estÃ¡ o tipo de quiz", tipodeQuiz)
                console.log('Xbox', Xbox)
                console.log('Playstation', Playstation)
                console.log('Fliperama', Fliperama)
                console.log("Dados do grÃ¡fico de barras:", data)

                console.log('-------------------------------------------------------------------------------')

                plotarGraficoBarra(data)
            })
            .catch(function (error) {
                console.error(error);
            });

    }


    function obterDadosParaQuizPizza() {



        fetch('/main/obterDadosPizza')
            .then(function (response) {
                return response.json();

            })
            .then(function (data) {
                console.log("Dados do grÃ¡fico de pizza:", data)

                plotarGraficoPizza(data)

                if (data.nome_usuario) {
                    console.log('aqui estÃ¡ o nome do usuario', data.nome_usuario)
                    nomeDoUsuario = data[0].nome_usuario
                }


            })

            .catch(function (error) {
                console.error(error);
            });

    }








    function resetQuizVariables() {
        pontuacaoFinal = 0;
        tentativaIncorreta = 0;
        RespostaCorreta = 0;
        RespostaErrada = 0;
        respostaUsuario = [];
    }


    function homepage() {
        reset();

        if (typeof msg_home !== 'undefined' && msg_home !== null) {
            msg_home.innerHTML = `<h1>Bem Vindo ${nome || 'Convidado'}ğŸ‘‹</h1>`;
        } else {
            console.error("Elemento 'msg_home' nÃ£o encontrado.");
        }

        if (typeof posts !== 'undefined' && posts !== null) {
            posts.innerHTML = `
            <div class="post-header">
                <span>nome_post</span> </div>
            <div class="post-conteudo">
                <textarea type="text" id="ipt_conteudo_postado" placeholder="Poste algo para os amigos"></textarea>
                <div id="cards"></div>
            </div>
            <div class="post-footer">
                <button onclick="postar()">Postar</button>
            </div>
            <div id="feed-de-posts"></div> `;
        } else {
            console.error("Elemento 'posts' nÃ£o encontrado.");
        }

        carregarFeedDePosts();

    }


    function postar() {

        const conteudoPost = (ipt_conteudo_postado).value;
        const dataPublicacao = new Date().toISOString();
        posteusuario;

        posteusuario.push({
            conteudo: conteudoPost,
            dataPublicacao: dataPublicacao
        });

        fetch("/main", {
            method: "POST",
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({

                conteudo: conteudoPost,
                dataPublicacao: dataPublicacao

            })
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);
                if (resposta.ok) {
                    console.log("Post enviado com sucesso para o backend!")
                } else {
                    resposta.json().then(errorData => {
                        console.error("Erro ao enviar post para o back end", errorData)
                    }).catch(() => {
                        console.error("Erro ao enviar post para o backend. Status do erro: ", resposta.status)
                    })
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

        if (typeof aposPost !== 'undefined' && aposPost !== null) {


            aposPost.innerHTML += `
        
            <div id="cards_post">
                <div class="card">
                    ${conteudoPost}<br>
                    <small>${new Date().toLocaleString()}</small>
                    </div>
                    </div>
                    </div>
                    `;
        } else {
            console.error("Elemento aposPost nÃ£o encontrado. Os post nÃ£o seram exibidos")
        }
        if (typeof ipt_conteudo_postado !== 'undefined' && ipt_conteudo_postado !== null) {
            ipt_conteudo_postado.value = "";
        }

    }

    function mensagem() {
        reset();

        msg_home.innerHTML = `<h1>Essas sÃ£o suas mensagens ${nome}ğŸ‘‹</h1>`

        class_mensagem.innerHTML = `<div class="nome-mensagem">
                        <h2>NOME_MENSAGEM</h2>
                    </div>
                    <div class="conteudo_mensagem">
                        Lorem ipsum dolor, sit amet consectetur adipisicing elit. Natus debitis voluptatem, laudantium aliquid ex necessitatibus id, quaerat veniam et iure, nobis officia quos quibusdam quod soluta minus est fugiat nostrum!
                    </div>
                    <button class="responder_mensagem">Responder</button>
                    <div class="nome-mensagem">
                        <h2>NOME_MENSAGEM</h2>
                    </div>
                    <div class="conteudo_mensagem">
                        Lorem ipsum dolor, sit amet consectetur adipisicing elit. Natus debitis voluptatem, laudantium aliquid ex necessitatibus id, quaerat veniam et iure, nobis officia quos quibusdam quod soluta minus est fugiat nostrum!
                    </div>
                    <button class="responder_mensagem">Responder</button>
                    <div class="nome-mensagem">
                        <h2>NOME_MENSAGEM</h2>
                    </div>
                    <div class="conteudo_mensagem">
                        Lorem ipsum dolor, sit amet consectetur adipisicing elit. Natus debitis voluptatem, laudantium aliquid ex necessitatibus id, quaerat veniam et iure, nobis officia quos quibusdam quod soluta minus est fugiat nostrum!
                    </div>
                    <button class="responder_mensagem">Responder</button>
                    <div class="nome-mensagem">
                        <h2>NOME_MENSAGEM</h2>
                    </div>
                    <div class="conteudo_mensagem">
                        Lorem ipsum dolor, sit amet consectetur adipisicing elit. Natus debitis voluptatem, laudantium aliquid ex necessitatibus id, quaerat veniam et iure, nobis officia quos quibusdam quod soluta minus est fugiat nostrum!
                    </div>
                    <button class="responder_mensagem">Responder</button>
               </div>
               
                `;

    }


    function quiz() {
        reset();
        resetQuizVariables();

        msg_home.innerHTML = `<h1>Bem vindo ao quiz ${nome} ğŸ•¹ï¸</h1>`
        document.querySelector(".class-quiz").innerHTML = `<div class="div_console">
                    Escolha alguma plataforma para jogar  ğŸ®
                    <select onchange="optconsole()" id="optconsoleid">
                        <option value="#"></option>
                        <option value="playstation">PLAYSTATION</option>
                        <option value="xbox">XBOX</option>
                        <option value="fliperama">FLIPERAMA</option>
                    </select>
                    </div>
                    <div class="conteudo_options_console"></div>
                    `;




    }


    function optconsole() {
        select_option = document.getElementById('optconsoleid').value;
        const div_escolha = document.querySelector(".conteudo_options_console");

        if (select_option === '#') {
            div_escolha.innerHTML = 'Selecione uma plataforma para jogar!';
            return;
        }

        if (select_option == 'playstation') {
            div_escolha.innerHTML = ""
            div_escolha.innerHTML += `
                       <div class="sessao">                             
    <h2>Qual Ã© o nome do personagem principal da sÃ©rie <span>God of War?</span></h2>                             
    <div class="opcoes">                                 
        <input type="text" name="grupo1" id="respostaGrupoPlaystation1">                                 
        <div class="input">                                 
            <div class="nomedasopcoes">1Âª Kratos</div>                                 
            <div class="nomedasopcoes">2Âª Ares</div>                                 
            <div class="nomedasopcoes">3Âª Atreus</div>                                 
            <div class="nomedasopcoes">4Âª Hades</div>                                 
        </div>                             
    </div>                         
</div>                                                  

<div class="sessao">                             
    <h2>Quem Ã© o protagonista da sÃ©rie Uncharted?</h2>                             
    <div class="opcoes">                                 
        <input type="text" name="grupo2" id="respostaGrupoPlaystation2">                                 
        <div class="input">                                 
            <div class="nomedasopcoes">1Âª Joel</div>                                 
            <div class="nomedasopcoes">2Âª Nathan Drake</div>                                 
            <div class="nomedasopcoes">3Âª Sully</div>                                 
            <div class="nomedasopcoes">4Âª Desmond</div>                                 
        </div>                             
    </div>                         
</div>                          

<div class="sessao">                             
    <h2>Qual jogo se passa em um mundo pÃ³s-apocalÃ­ptico provocado por um fungo que existe no mundo real?</h2>                             
    <div class="opcoes">                                  
        <input type="text" name="grupo3" id="respostaGrupoPlaystation3">                                 
        <div class="input">                                 
            <div class="nomedasopcoes">1Âª Days Gone</div>                                 
            <div class="nomedasopcoes">2Âª Fallout</div>                                 
            <div class="nomedasopcoes">3Âª The last of Us</div>                                 
            <div class="nomedasopcoes">4Âª Horizon</div>                                 
        </div>                             
    </div>                         
</div>                          

<div class="sessao">                             
    <h2>Qual jogo se passa em um mundo pÃ³s-apocalÃ­ptico devido a revoluÃ§Ã£o das maquinas?</h2>                             
    <div class="opcoes">                                  
        <input type="text" name="grupo4" id="respostaGrupoPlaystation4">                                 
        <div class="input">                                 
            <div class="nomedasopcoes">1Âª Call of Duty</div>                                 
            <div class="nomedasopcoes">2Âª Metal Slug</div>                                 
            <div class="nomedasopcoes">3Âª Sully</div>                                 
            <div class="nomedasopcoes">4Âª Horizon Zero Dawn</div>                                 
        </div>                             
    </div>                         
</div> 

<div class="sessao">     
    <h2>Qual jogo se passa em um mundo futurista onde androides lutam por liberdade?</h2>     
    <div class="opcoes">         
        <input type="text" name="grupo5" id="respostaGrupoPlaystation5">         
        <div class="input">
            <div class="nomedasopcoes">1Âª Detroit: Become Human</div>         
            <div class="nomedasopcoes">2Âª Mass Effect</div>         
            <div class="nomedasopcoes">3Âª Cyberpunk 2077</div>         
            <div class="nomedasopcoes">4Âª Ghostrunner</div>     
        </div>
    </div> 
</div>                           

<div class="sessao">                             
    <h2>Qual jogo retrata a vida de um especialista hacker?</h2>                             
    <div class="opcoes">                                 
        <input type="text" name="grupo6" id="respostaGrupoPlaystation6">                                 
        <div class="input">
            <div class="nomedasopcoes">1Âª Watch Dogs</div>                                 
            <div class="nomedasopcoes">2Âª Metal Slug</div>                                 
            <div class="nomedasopcoes">3Âª Bloodborne</div>                                 
            <div class="nomedasopcoes">4Âª Rachet & Clank</div>                             
        </div>
    </div>                         
</div>                          

<div class="sessao">                             
    <h2>Qual jogo de playstation se passa em um ambiente de faroeste?</h2>                             
    <div class="opcoes">                                 
        <input type="text" name="grupo7" id="respostaGrupoPlaystation7">                                 
        <div class="input">
            <div class="nomedasopcoes">1Âª Sekiro</div>                                 
            <div class="nomedasopcoes">2Âª Far Cry6</div>                                 
            <div class="nomedasopcoes">3Âª It Takes Two</div>                                 
            <div class="nomedasopcoes">4Âª Red dead Redemption 2</div>                             
        </div>
    </div>                         
</div>                          

<div class="sessao">                             
    <h2>Qual personagem protagonista Ã© um ex gangster que se torna policial e Ã© promovido a detetive?</h2>                             
    <div class="opcoes">                                 
        <input type="text" name="grupo8" id="respostaGrupoPlaystation8">                                 
        <div class="input">
            <div class="nomedasopcoes">1Âª Drive</div>                                 
            <div class="nomedasopcoes">2Âª winning eleven</div>                                 
            <div class="nomedasopcoes">3Âª True Crime</div>                                 
            <div class="nomedasopcoes">4Âª Pac-man</div>                             
        </div>
    </div>                         
</div>                          

<div class="sessao">                             
    <h2>Qual jogo de corrida tem o objetivo de fazer o protagonista se tornar o 1Â° piloto na "Black List"?</h2>                             
    <div class="opcoes">                                 
        <input type="text" name="grupo9" id="respostaGrupoPlaystation9">                                 
        <div class="input">
            <div class="nomedasopcoes">1Âª Gran Turismo</div>                                 
            <div class="nomedasopcoes">2Âª Crash Nitro Kart</div>                                 
            <div class="nomedasopcoes">3Âª Midnight Club</div>                                 
            <div class="nomedasopcoes">4Âª Need For speed Most Wanted</div>                             
        </div>
    </div>                         
</div>                          

<div class="sessao">                             
    <h2>Qual jogo Ã© ambientado em um internato e o nome do seu protagonista Ã© Jimmy?</h2>                             
    <div class="opcoes">                                 
        <input type="text" name="grupo10" id="respostaGrupoPlaystation10">                                 
        <div class="input">
            <div class="nomedasopcoes">1Âª Don't Starve</div>                                 
            <div class="nomedasopcoes">2Âª Fallout 4</div>                                 
            <div class="nomedasopcoes">3Âª Death Stranding</div>                                 
            <div class="nomedasopcoes">4Âª Bully</div>                             
        </div>
    </div>                         
</div>                         

<button onclick="fimQuizPlaystation()" class="buttonQuiz">Terminar Quiz</button>
`;

        }
        else if (select_option == 'xbox') {
            div_escolha.innerHTML = ""
            div_escolha.innerHTML += `
    <div class="sessao">
        <h2>Qual Ã© o protagonista da franquia Halo?</h2>
        <div class="opcoes">
            <input type="text" name="grupo1" id="respostaGrupoXbox1">
            <div class="input">
                <div class="nomedasopcoes">1Âª Master Chief</div>
                <div class="nomedasopcoes">2Âª Cortana</div>
                <div class="nomedasopcoes">3Âª Spartan Locke</div>
                <div class="nomedasopcoes">4Âª Commander Shepard</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo exclusivo do Xbox Ã© focado em carros e corridas em mundo aberto?</h2>
        <div class="opcoes">
            <input type="text" name="grupo2" id="respostaGrupoXbox2">
            <div class="input">
                <div class="nomedasopcoes">1Âª Forza Horizon</div>
                <div class="nomedasopcoes">2Âª Gran Turismo</div>
                <div class="nomedasopcoes">3Âª Need for Speed</div>
                <div class="nomedasopcoes">4Âª F1 2023</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo de aÃ§Ã£o e aventura Ã© protagonizado por Senua, uma guerreira celta?</h2>
        <div class="opcoes">
            <input type="text" name="grupo3" id="respostaGrupoXbox3">
            <div class="input">
                <div class="nomedasopcoes">1Âª Hellblade: Senua's Sacrifice</div>
                <div class="nomedasopcoes">2Âª ReCore</div>
                <div class="nomedasopcoes">3Âª Gears 5</div>
                <div class="nomedasopcoes">4Âª Halo Infinite</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual franquia de tiro em terceira pessoa Ã© conhecida por seu uso do sistema de cobertura e inimigos Locust?</h2>
        <div class="opcoes">
            <input type="text" name="grupo4" id="respostaGrupoXbox4">
            <div class="input">
                <div class="nomedasopcoes">1Âª Gears of War</div>
                <div class="nomedasopcoes">2Âª Call of Duty</div>
                <div class="nomedasopcoes">3Âª The Division</div>
                <div class="nomedasopcoes">4Âª Battlefield</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo exclusivo da Xbox permite criar mundos inteiros com blocos?</h2>
        <div class="opcoes">
            <input type="text" name="grupo5" id="respostaGrupoXbox5">
            <div class="input">
                <div class="nomedasopcoes">1Âª Minecraft</div>
                <div class="nomedasopcoes">2Âª Roblox</div>
                <div class="nomedasopcoes">3Âª Terraria</div>
                <div class="nomedasopcoes">4Âª Lego Worlds</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual Ã© o nome do jogo de plataforma estrelado por um esquilo sarcÃ¡stico em um mundo adulto?</h2>
        <div class="opcoes">
            <input type="text" name="grupo6" id="respostaGrupoXbox6">
            <div class="input">
                <div class="nomedasopcoes">1Âª Conker's Bad Fur Day</div>
                <div class="nomedasopcoes">2Âª Banjo-Kazooie</div>
                <div class="nomedasopcoes">3Âª Blinx: The Time Sweeper</div>
                <div class="nomedasopcoes">4Âª Viva PiÃ±ata</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo exclusivo do Xbox coloca o jogador no controle de uma jovem chamada Kameo com poderes elementais?</h2>
        <div class="opcoes">
            <input type="text" name="grupo7" id="respostaGrupoXbox7">
            <div class="input">
                <div class="nomedasopcoes">1Âª Kameo: Elements of Power</div>
                <div class="nomedasopcoes">2Âª Fable II</div>
                <div class="nomedasopcoes">3Âª Ori and the Blind Forest</div>
                <div class="nomedasopcoes">4Âª Blue Dragon</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual RPG exclusivo do Xbox foi criado por Peter Molyneux e permite fazer escolhas morais?</h2>
        <div class="opcoes">
            <input type="text" name="grupo8" id="respostaGrupoXbox8">
            <div class="input">
                <div class="nomedasopcoes">1Âª Fable</div>
                <div class="nomedasopcoes">2Âª Mass Effect</div>
                <div class="nomedasopcoes">3Âª Dragon Age</div>
                <div class="nomedasopcoes">4Âª Elder Scrolls</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo do Xbox tem uma mecÃ¢nica baseada em manipular o tempo?</h2>
        <div class="opcoes">
            <input type="text" name="grupo9" id="respostaGrupoXbox9">
            <div class="input">
                <div class="nomedasopcoes">1Âª Quantum Break</div>
                <div class="nomedasopcoes">2Âª Control</div>
                <div class="nomedasopcoes">3Âª Alan Wake</div>
                <div class="nomedasopcoes">4Âª Max Payne</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo indie exclusivo da Xbox Ã© conhecido por sua arte desenhada Ã  mÃ£o e trilha sonora jazz?</h2>
        <div class="opcoes">
            <input type="text" name="grupo10" id="respostaGrupoXbox10">
            <div class="input">
                <div class="nomedasopcoes">1Âª Cuphead</div>
                <div class="nomedasopcoes">2Âª Ori and the Will of the Wisps</div>
                <div class="nomedasopcoes">3Âª Hollow Knight</div>
                <div class="nomedasopcoes">4Âª Shovel Knight</div>
            </div>
        </div>
    </div>
    <button onclick="fimQuizXbox()" class="buttonQuiz">Terminar Quiz</button>
    <div class="FinalQuiz" id="FinalQuiz">
    </div>`;

        }
        else if (select_option == 'fliperama') {
            div_escolha.innerHTML = ""
            div_escolha.innerHTML += `
    <div class="sessao">
        <h2>Qual personagem Ã© o principal representante da sÃ©rie Street Fighter?</h2>
        <div class="opcoes">
            <input type="text" name="grupo1" id="respostaGrupoFliperama1">
            <div class="input">
                <div class="nomedasopcoes">1Âª Ryu</div>
                <div class="nomedasopcoes">2Âª Scorpion</div>
                <div class="nomedasopcoes">3Âª Terry Bogard</div>
                <div class="nomedasopcoes">4Âª Liu Kang</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo de luta criado pela Midway ficou famoso pela violÃªncia e "Fatalities"?</h2>
        <div class="opcoes">
            <input type="text" name="grupo2" id="respostaGrupoFliperama2">
            <div class="input">
                <div class="nomedasopcoes">1Âª Mortal Kombat</div>
                <div class="nomedasopcoes">2Âª Tekken</div>
                <div class="nomedasopcoes">3Âª Street Fighter</div>
                <div class="nomedasopcoes">4Âª Virtua Fighter</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo de corrida de fliperama Ã© conhecido por seu estilo futurista e trilha sonora eletrÃ´nica?</h2>
        <div class="opcoes">
            <input type="text" name="grupo3" id="respostaGrupoFliperama3">
            <div class="input">
                <div class="nomedasopcoes">1Âª F-Zero</div>
                <div class="nomedasopcoes">2Âª OutRun</div>
                <div class="nomedasopcoes">3Âª Cruis'n USA</div>
                <div class="nomedasopcoes">4Âª Daytona USA</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo de plataforma com um gorila como vilÃ£o foi um dos primeiros sucessos da Nintendo nos fliperamas?</h2>
        <div class="opcoes">
            <input type="text" name="grupo4" id="respostaGrupoFliperama4">
            <div class="input">
                <div class="nomedasopcoes">1Âª Donkey Kong</div>
                <div class="nomedasopcoes">2Âª Mario Bros.</div>
                <div class="nomedasopcoes">3Âª Bubble Bobble</div>
                <div class="nomedasopcoes">4Âª Ghosts 'n Goblins</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual beat 'em up clÃ¡ssico da Capcom permitia atÃ© 3 jogadores simultaneamente nas ruas de Metro City?</h2>
        <div class="opcoes">
            <input type="text" name="grupo5" id="respostaGrupoFliperama5">
            <div class="input">
                <div class="nomedasopcoes">1Âª Final Fight</div>
                <div class="nomedasopcoes">2Âª Double Dragon</div>
                <div class="nomedasopcoes">3Âª Cadillacs and Dinosaurs</div>
                <div class="nomedasopcoes">4Âª Golden Axe</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo de fliperama da SNK tem como protagonista Terry Bogard?</h2>
        <div class="opcoes">
            <input type="text" name="grupo6" id="respostaGrupoFliperama6">
            <div class="input">
                <div class="nomedasopcoes">1Âª Fatal Fury</div>
                <div class="nomedasopcoes">2Âª Samurai Shodown</div>
                <div class="nomedasopcoes">3Âª The King of Fighters</div>
                <div class="nomedasopcoes">4Âª World Heroes</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo da SEGA apresentava motos futuristas em pistas tridimensionais e ficou famoso nos arcades?</h2>
        <div class="opcoes">
            <input type="text" name="grupo7" id="respostaGrupoFliperama7">
            <div class="input">
                <div class="nomedasopcoes">1Âª Super Hang-On</div>
                <div class="nomedasopcoes">2Âª Road Rash</div>
                <div class="nomedasopcoes">3Âª Excitebike</div>
                <div class="nomedasopcoes">4Âª Enduro Racer</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo arcade tem como objetivo principal comer todos os pontos e fugir dos fantasmas?</h2>
        <div class="opcoes">
            <input type="text" name="grupo8" id="respostaGrupoFliperama8">
            <div class="input">
                <div class="nomedasopcoes">1Âª Pac-Man</div>
                <div class="nomedasopcoes">2Âª Bomberman</div>
                <div class="nomedasopcoes">3Âª Dig Dug</div>
                <div class="nomedasopcoes">4Âª Q*bert</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual Ã© o nome do jogo onde dois jogadores pilotam tanques e aviÃµes em um estilo de guerra contra aliens?</h2>
        <div class="opcoes">
            <input type="text" name="grupo9" id="respostaGrupoFliperama9">
            <div class="input">
                <div class="nomedasopcoes">1Âª Metal Slug</div>
                <div class="nomedasopcoes">2Âª Contra</div>
                <div class="nomedasopcoes">3Âª 1942</div>
                <div class="nomedasopcoes">4Âª Gunstar Heroes</div>
            </div>
        </div>
    </div>

    <div class="sessao">
        <h2>Qual jogo de fliperama coloca vocÃª na pele de cavaleiros em uma aventura medieval contra mortos-vivos?</h2>
        <div class="opcoes">
            <input type="text" name="grupo10" id="respostaGrupoFliperama10">
            <div class="input">
                <div class="nomedasopcoes">1Âª Ghosts 'n Goblins</div>
                <div class="nomedasopcoes">2Âª Golden Axe</div>
                <div class="nomedasopcoes">3Âª Altered Beast</div>
                <div class="nomedasopcoes">4Âª Castlevania</div>
            </div>
        </div>
    </div>

    <button onclick="fimQuizFliperama()" class="buttonQuiz">Terminar Quiz</button>
   `;

        }
    }


    function reset() {
        if (myChart) {
            myChart.destroy();
            myChart = null;
        }
        if (myChart2) {
            myChart2.destroy();
            myChart2 = null
        }

        msg_home.innerHTML = "";
        posts.innerHTML = "";
        class_mensagem.innerHTML = "";
        div_escolha.innerHTML = "";
        dash.innerHTML = "";
        document.querySelector(".class-quiz").innerHTML = "";

    }

    function fimQuizPlaystation() {
        respostaCerta;
        porcentagemFinalDeAcertos
        let porcentagemTexto = Math.round(porcentagemFinalDeAcertos * 100);
        select_option;

        quantidadeDeQuestoes;
        RespostaCorreta = 0;
        RespostaErrada = 0;

        let respostaGrupo1 = respostaGrupoPlaystation1.value
        let respostaGrupo2 = respostaGrupoPlaystation2.value
        let respostaGrupo3 = respostaGrupoPlaystation3.value
        let respostaGrupo4 = respostaGrupoPlaystation4.value
        let respostaGrupo5 = respostaGrupoPlaystation5.value
        let respostaGrupo6 = respostaGrupoPlaystation6.value
        let respostaGrupo7 = respostaGrupoPlaystation7.value
        let respostaGrupo8 = respostaGrupoPlaystation8.value
        let respostaGrupo9 = respostaGrupoPlaystation9.value
        let respostaGrupo10 = respostaGrupoPlaystation10.value
        let pontuacaoFial = 0;
        let selecionadaPlataforma;
        let nomePlataforma;

        respostaUsuario = [];

        respostaUsuario.push(respostaGrupo1, respostaGrupo2, respostaGrupo3, respostaGrupo4, respostaGrupo5, respostaGrupo6, respostaGrupo7, respostaGrupo8, respostaGrupo9, respostaGrupo10)

        for (i = 0; i < respostaCerta.length; i++) {
            if (respostaCerta[i].plataforma == 'playstation') {
                nomePlataforma = respostaCerta[i].respostas
                for (j = 0; j < respostaUsuario.length; j++) {
                    if (nomePlataforma[j] == respostaUsuario[j]) {
                        RespostaCorreta++;
                        pontuacaoFial++;
                    } else {
                        RespostaErrada++;
                        tentativaIncorreta++;
                    }
                }
            }
        }
        let porcentagemFInalDeAcertos = RespostaCorreta / quantidadeDeQuestoes;
        porcentagemFinalDeAcertos = porcentagemFInalDeAcertos; // Atualizar a variÃ¡vel global

        if (porcentagemFInalDeAcertos <= 0.3) {
            prompt(`Game Over!\nVocÃª acertou ${porcentagemTexto}% das questÃµes`);
        } else if (porcentagemFInalDeAcertos > 0.3 && porcentagemFInalDeAcertos < 0.9) {
            prompt(`Tem que upar mais o seu personagem \nVocÃª acertou ${porcentagemTexto}% das questÃµes`);
        } else if (porcentagemFInalDeAcertos >= 0.9) {
            prompt(`VocÃª tem evoluido constantemente, parabÃ©ns!\nVocÃª acertou ${porcentagemTexto}% das questÃµes`);
        }



        fetch("/main/quiz", { //minha rota da api
            method: "POST", //tipo de metodo
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ //converter para json
                RespostaCorreta,
                RespostaErrada,

            }) // aqui eu envio as minhas variaveis para serem convertidas em json, pois o back espera em json. Estou no caso enviando as respostas do meu usuario.

        })
            .then(function (resposta) { //tratamento dos erros e acertos caso seja enviado pelo fetch ou nÃ£o
                console.log("resposta: ", resposta);
                if (resposta.ok) {
                    console.log("Quiz feito pelo usuario enviado com sucesso para o backend");
                } else {
                    resposta.json().then(errorData => {
                        console.error("Erro ao enviar quiz para o back end", errorData);
                    }).catch(() => {
                        console.error("Erro ao enviar quiz para o backend. Status do erro: ", resposta.status);
                    });
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });
    }
    function fimQuizXbox() {
        respostaUsuario
        respostaCerta;
        porcentagemFinalDeAcertos
        let porcentagemTexto = Math.round(porcentagemFinalDeAcertos * 100);
        quantidadeDeQuestoes;
        tentativaIncorreta;
        RespostaCorreta;
        RespostaErrada;

        let respostaXbox1 = respostaGrupoXbox1.value;
        let respostaXbox2 = respostaGrupoXbox2.value;
        let respostaXbox3 = respostaGrupoXbox3.value;
        let respostaXbox4 = respostaGrupoXbox4.value;
        let respostaXbox5 = respostaGrupoXbox5.value;
        let respostaXbox6 = respostaGrupoXbox6.value;
        let respostaXbox7 = respostaGrupoXbox7.value;
        let respostaXbox8 = respostaGrupoXbox8.value;
        let respostaXbox9 = respostaGrupoXbox9.value;
        let respostaXbox10 = respostaGrupoXbox10.value;

        let selecionadaPlataforma;
        let nomePlataforma;

        respostaUsuario.push(respostaXbox1, respostaXbox2, respostaXbox3, respostaXbox4, respostaXbox5, respostaXbox6, respostaXbox7, respostaXbox8, respostaXbox9, respostaXbox10)



        for (i = 0; i < respostaCerta.length; i++) {

            if (respostaCerta[i].plataforma == 'xbox') {
                nomePlataforma = respostaCerta[i].respostas

                for (j = 0; j < respostaUsuario.length; j++) {
                    if (nomePlataforma[j] == respostaUsuario[j]) {
                        RespostaCorreta++
                        pontuacaoFinal++
                    }
                    else {
                        RespostaErrada++
                        tentativaIncorreta
                    }
                }
            }
        }
        let porcentagemFInalDeAcertos = RespostaCorreta / quantidadeDeQuestoes;

        if (porcentagemFInalDeAcertos <= 0.3) {
            prompt(`Game Over!
            VocÃª acertou ${porcentagemTexto}% das questÃµes`)
        }
        else if (porcentagemFInalDeAcertos > 0.3 && porcentagemFInalDeAcertos < 0.9) {
            prompt(`Tem que upar mais o seu personagem 
            VocÃª acertou ${porcentagemTexto}% das questÃµes`);
        }
        else if (porcentagemFInalDeAcertos >= 0.9) {
            prompt(`VocÃª tem evoluido constantemente, parabÃ©ns!
            VocÃª acertou ${porcentagemTexto}% das questÃµes`);
        }


    }
    function fimQuizFliperama() {

        respostaUsuario
        respostaCerta;
        porcentagemFinalDeAcertos
        let porcentagemTexto = Math.round(porcentagemFinalDeAcertos * 100);
        quantidadeDeQuestoes;
        tentativaIncorreta;
        RespostaCorreta;
        RespostaErrada;
        tentativaIncorreta;

        let selecionadaPlataforma;
        let nomePlataforma;

        let respostaFliperama1 = respostaGrupoFliperama1.value;
        let respostaFliperama2 = respostaGrupoFliperama2.value;
        let respostaFliperama3 = respostaGrupoFliperama3.value;
        let respostaFliperama4 = respostaGrupoFliperama4.value;
        let respostaFliperama5 = respostaGrupoFliperama5.value;
        let respostaFliperama6 = respostaGrupoFliperama6.value;
        let respostaFliperama7 = respostaGrupoFliperama7.value;
        let respostaFliperama8 = respostaGrupoFliperama8.value;
        let respostaFliperama9 = respostaGrupoFliperama9.value;
        let respostaFliperama10 = respostaGrupoFliperama10.value;


        respostaUsuario.push(respostaFliperama1, respostaFliperama2, respostaFliperama3, respostaFliperama4, respostaFliperama5, respostaFliperama6, respostaFliperama7, respostaFliperama8, respostaFliperama9, respostaFliperama10)

        for (i = 0; i < respostaCerta.length; i++) {

            if (respostaCerta[i].plataforma == 'fliperama') {
                nomePlataforma = respostaCerta[i].respostas

                for (j = 0; j < respostaUsuario.length; j++) {
                    if (nomePlataforma[j] == respostaUsuario[j]) {
                        RespostaCorreta++

                    }
                    else {
                        RespostaErrada++
                    }
                }
            }
        }
        let porcentagemFInalDeAcertos = RespostaCorreta / quantidadeDeQuestoes;

        if (porcentagemFInalDeAcertos <= 0.3) {
            prompt(`Game Over!
            VocÃª acertou ${porcentagemTexto}% das questÃµes`)
        }
        else if (porcentagemFInalDeAcertos > 0.3 && porcentagemFInalDeAcertos < 0.9) {
            prompt(`Tem que upar mais o seu personagem 
            VocÃª acertou ${porcentagemTexto}% das questÃµes`);
        }
        else if (porcentagemFInalDeAcertos >= 0.9) {
            prompt(`VocÃª tem evoluido constantemente, parabÃ©ns!
            VocÃª acertou ${porcentagemTexto}% das questÃµes`);
        }

    }


    let myChart = null;
    let myChart2 = null;


    function jogosEmAlta() {
        reset();



        msg_home.innerHTML = `<h1>Bem Vindo ${nome}ğŸ‘‹</h1>`
        dash.innerHTML = ` <div class="conteudo-dash">
                    <canvas id="myChart"></canvas>
                    <canvas id="myChart2"></canvas>
                </div>`;



        obterDadosParaQuiz();
        obterDadosParaQuizPizza()

    }






    function plotarGraficoPizza(dados) {
        const ctx = document.getElementById('myChart');


        myChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: tipodeQuiz,
                datasets: [{
                    label: 'Respostas Certas',
                    data: dados,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(54, 162, 235, 0.7)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspecRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Grafico de acertos e erros'
                    }
                }
            }
        });

    }

    function plotarGraficoBarra(dados) {

        const ctx2 = document.getElementById('myChart2');


        myChart2 = new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: [tipodeQuiz[0], tipodeQuiz[1], tipodeQuiz[2]], 
                datasets: [{
                    label: 'MÃ©dia geral do quiz',
                    data: [QtdAcertos[0], QtdAcertos[1], QtdAcertos[2]],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.5)',
                        'rgba(54, 162, 235, 0.5)',
                        'rgba(255, 206, 86, 0.5)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Ranking de acerto entre os jogadores'
                    }
                }
            }
        });

    }









</script>